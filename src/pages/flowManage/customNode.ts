import { h, RectNode, RectNodeModel } from '@logicflow/core';


const customIcon = {
  table: '<svg t="1724401442108" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4727" width="18" height="18"><path d="M959.825022 384.002258V191.939717C959.825022 121.2479 902.517291 63.940169 831.825474 63.940169H191.939717C121.2479 63.940169 63.940169 121.2479 63.940169 191.939717v639.885757C63.940169 902.517291 121.2479 959.825022 191.939717 959.825022h639.885757c70.691817 0 127.999548-57.307731 127.999548-127.999548V384.002258zM146.66502 146.66502a63.737872 63.737872 0 0 1 45.336109-18.784682h639.997742A63.961844 63.961844 0 0 1 895.884854 192.001129V320.062089H127.880338V192.001129A63.737872 63.737872 0 0 1 146.66502 146.66502z m269.1267 461.308451v-223.971213h192.181751v223.971213h-192.181751z m192.181751 63.940169v223.971214h-192.181751v-223.971214h192.181751z m-256.12192-63.940169H127.880338v-223.971213h223.971213v223.971213z m-205.186531 269.235073a63.466939 63.466939 0 0 1-18.784682-45.209673V671.91364h223.971213v223.971214H192.001129a63.625887 63.625887 0 0 1-45.336109-18.67631z m749.219834-45.209673A63.763159 63.763159 0 0 1 831.998871 895.884854H671.91364v-223.971214h223.971214v160.085231z m0-224.0254h-223.971214v-223.971213h223.971214v223.971213z" fill="" p-id="4728"></path></svg>',
  file: '<svg t="1724405008366" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4305" width="18" height="18"><path d="M576 742.4H324.267c-12.8 0-21.334 8.533-21.334 21.333s8.534 21.334 21.334 21.334H576c12.8 0 21.333-8.534 21.333-21.334S584.533 742.4 576 742.4zM699.733 576H324.267c-12.8 0-21.334 8.533-21.334 21.333 0 12.8 8.534 21.334 21.334 21.334h375.466c12.8 0 21.334-8.534 21.334-21.334 0-12.8-8.534-21.333-21.334-21.333zM324.267 281.6h102.4c12.8 0 21.333-8.533 21.333-21.333 0-12.8-8.533-21.334-21.333-21.334h-102.4c-12.8 0-21.334 8.534-21.334 21.334 0 12.8 8.534 21.333 21.334 21.333zM678.4 55.467H221.867c-46.934 0-85.334 38.4-85.334 85.333v750.933c0 46.934 38.4 85.334 85.334 85.334H806.4c46.933 0 85.333-38.4 85.333-85.334V281.6L678.4 55.467z m166.4 832c0 21.333-17.067 42.666-42.667 42.666H221.867c-21.334 0-42.667-17.066-42.667-42.666V136.533c0-21.333 17.067-42.666 42.667-42.666h375.466v209.066c0 21.334 17.067 42.667 42.667 42.667h209.067v541.867zM635.733 302.933V93.867h21.334L844.8 302.933H635.733z m-332.8 123.734c0 12.8 8.534 21.333 21.334 21.333h375.466c12.8 0 21.334-8.533 21.334-21.333 0-12.8-8.534-21.334-21.334-21.334H324.267c-12.8 4.267-21.334 12.8-21.334 21.334z" p-id="4306"></path></svg>',
  img: '<svg width="18" height="18" viewBox="0 0 1024 1024" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M841.71335 65.290005 182.285626 65.290005c-64.511269 0-116.995621 52.484352-116.995621 116.995621L65.290005 841.71335c0 64.511269 52.484352 116.995621 116.995621 116.995621l659.427724 0c64.511269 0 116.995621-52.484352 116.995621-116.995621L958.708971 182.285626C958.708971 117.774357 906.225643 65.290005 841.71335 65.290005zM182.285626 107.833961l659.427724 0c41.051975 0 74.451666 33.398668 74.451666 74.451666l0 136.557142c-150.09446 5.26184-290.370297 66.084091-396.978337 172.692131-49.960879 49.961902-89.841168 107.331517-118.694309 169.625282-83.496669-70.835302-204.372667-75.376735-292.65841-13.617136L107.833961 182.285626C107.833961 141.232628 141.232628 107.833961 182.285626 107.833961zM107.833961 841.71335 107.833961 702.627618c76.54228-74.311473 198.833511-74.234725 275.272437 0.24457-24.303522 65.298192-37.026288 135.112234-37.026288 206.91149 0 2.223644 0.343831 4.366448 0.977257 6.381337L182.285626 916.165016C141.232628 916.165016 107.833961 882.766348 107.833961 841.71335zM841.71335 916.165016 387.646807 916.165016c0.633427-2.01489 0.977257-4.157693 0.977257-6.381337 0-146.71755 57.053414-284.572244 160.647817-388.166647 98.570993-98.570993 228.166583-154.963351 366.894158-160.204725L916.166039 841.71335C916.165016 882.766348 882.766348 916.165016 841.71335 916.165016z" fill="#272636"/><path d="M312.397986 413.458683c60.8376 0 110.332874-49.494251 110.332874-110.332874s-49.494251-110.332874-110.332874-110.332874-110.332874 49.494251-110.332874 110.332874S251.559363 413.458683 312.397986 413.458683zM312.397986 235.337913c37.378306 0 67.788919 30.40959 67.788919 67.788919s-30.40959 67.788919-67.788919 67.788919-67.788919-30.40959-67.788919-67.788919S275.018657 235.337913 312.397986 235.337913z" fill="#272636"/></svg>',
  sql: '<svg t="1724405292812" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4286" width="18" height="18"><path d="M927.8 193.7c0.1-1.6 0.2-3.2 0.2-4.8 0-15.7-6.3-30-18.7-42.9-6.9-7.2-15.8-13.9-26.5-20.1-21.9-12.7-52.3-23.9-90.5-33.3C717.1 74.2 617.5 64 512 64S306.9 74.2 231.7 92.6c-38.2 9.4-68.6 20.6-90.5 33.3-2.4 1.4-4.8 2.9-7 4.3-18.5 12.1-30.4 25.9-35.4 41.2-1.6 4.8-2.5 9.8-2.7 15H96v649.2c0 24.3 15.2 45.4 45.2 62.8 21.9 12.6 52.3 23.8 90.5 33.1C306.9 949.9 406.5 960 512 960s205.1-10.1 280.3-28.5c38.2-9.3 68.6-20.5 90.5-33.1 30-17.4 45.2-38.5 45.2-62.8V394h-0.2V193.7z m-58.3 419.6c-0.3 0.4-0.7 1-1.5 1.8l-0.6 0.6c-1.2 1.2-3 2.8-5.5 4.7-0.3 0.2-0.5 0.4-0.8 0.6-1.4 1-3 2.1-4.8 3.2-0.3 0.2-0.6 0.4-0.9 0.5-2.2 1.3-4.7 2.7-7.6 4.2-0.2 0.1-0.5 0.3-0.7 0.4-0.2 0.1-0.5 0.3-0.7 0.4-0.5 0.3-1 0.5-1.5 0.7-2.3 1.1-4.9 2.3-7.7 3.5-0.6 0.3-1.2 0.5-1.8 0.8 0 0-0.1 0-0.1 0.1-0.5 0.2-1.1 0.5-1.7 0.7-4.1 1.7-8.6 3.4-13.6 5.2-0.8 0.3-1.6 0.6-2.4 0.8-4.2 1.4-8.7 2.9-13.6 4.3-0.3 0.1-0.7 0.2-1 0.3-0.8 0.2-1.5 0.5-2.3 0.7-0.5 0.2-1.1 0.3-1.7 0.5-0.3 0.1-0.7 0.2-1 0.3-0.5 0.1-1 0.3-1.5 0.4-2 0.6-4.1 1.1-6.2 1.7l-3.3 0.9c-6.9 1.8-14.4 3.6-22.5 5.4-69.1 15.2-158.8 23.6-252.6 23.6s-183.5-8.4-252.6-23.6c-8.1-1.8-15.6-3.6-22.5-5.4l-3.3-0.9c-2.1-0.6-4.2-1.1-6.2-1.7-0.5-0.1-1-0.3-1.5-0.4-0.3-0.1-0.7-0.2-1-0.3-0.6-0.2-1.1-0.3-1.7-0.5-0.8-0.2-1.6-0.5-2.3-0.7-0.3-0.1-0.7-0.2-1-0.3-4.9-1.5-9.4-2.9-13.6-4.3-0.8-0.3-1.6-0.6-2.4-0.8-5-1.8-9.5-3.5-13.6-5.2-0.6-0.2-1.1-0.5-1.7-0.7 0 0-0.1 0-0.1-0.1-0.6-0.3-1.2-0.5-1.8-0.8-2.8-1.2-5.4-2.4-7.7-3.5-0.5-0.3-1-0.5-1.5-0.7-0.3-0.1-0.5-0.3-0.7-0.4-0.2-0.1-0.5-0.2-0.7-0.4-2.9-1.5-5.4-2.9-7.6-4.2-0.3-0.2-0.6-0.4-0.9-0.5-1.8-1.1-3.4-2.2-4.8-3.2-0.3-0.2-0.5-0.4-0.8-0.6-2.5-1.9-4.3-3.4-5.5-4.7l-0.6-0.6c-0.7-0.8-1.2-1.4-1.5-1.8V463.8c2 1 4.1 1.9 6.2 2.9 0.6 0.3 1.1 0.5 1.7 0.7l2.1 0.9c0.8 0.3 1.5 0.6 2.3 1 0.7 0.3 1.3 0.6 2 0.8 0.7 0.3 1.4 0.6 2.1 0.8 3.6 1.4 7.3 2.9 11.2 4.3 0.7 0.3 1.5 0.5 2.2 0.8 4.7 1.7 9.7 3.3 14.8 4.9 1.7 0.5 3.4 1.1 5.1 1.6 1.2 0.4 2.4 0.7 3.6 1.1l3.3 0.9c1.4 0.4 2.8 0.8 4.3 1.2 1.7 0.5 3.3 0.9 5 1.4 1.5 0.4 3.1 0.8 4.7 1.2 1 0.3 2.1 0.5 3.1 0.8l3.6 0.9c75.2 18.4 174.8 28.5 280.3 28.5h10.5c3.1 0 6.1 0 9.2-0.1h1.9c2.3 0 4.7-0.1 7-0.1 5.2-0.1 10.4-0.2 15.5-0.4 2.9-0.1 5.8-0.2 8.6-0.3 3.2-0.1 6.3-0.2 9.5-0.3 1.6-0.1 3.1-0.1 4.7-0.2 6.3-0.3 12.5-0.6 18.7-0.9 1.2-0.1 2.4-0.1 3.6-0.2l10.2-0.6c1.3-0.1 2.6-0.2 3.8-0.2 7.9-0.5 15.7-1.1 23.4-1.8 1.5-0.1 3-0.3 4.5-0.4 3.8-0.3 7.6-0.7 11.4-1 1.5-0.1 3-0.3 4.4-0.4 12.5-1.2 24.8-2.6 36.8-4.2 1.2-0.2 2.4-0.3 3.6-0.5 2.9-0.4 5.7-0.8 8.6-1.2 1.3-0.2 2.6-0.4 3.8-0.5 5.5-0.8 11-1.6 16.3-2.5 2.5-0.4 4.9-0.8 7.4-1.2 12.1-2 23.8-4.2 35-6.6 1.2-0.3 2.4-0.5 3.6-0.8 2.3-0.5 4.7-1 6.9-1.5 1.2-0.3 2.4-0.5 3.6-0.8 1.2-0.3 2.4-0.5 3.5-0.8 5.3-1.3 10.4-2.5 15.4-3.9 0.9-0.2 1.9-0.5 2.8-0.7 0.9-0.3 1.8-0.5 2.7-0.8l5.4-1.5c20.3-5.9 38-12.3 52.9-19.3 0.7-0.3 1.3-0.6 2-1v149.5zM154.3 258.9c1 0.5 2 1 3 1.4 19.9 9.3 44.8 17.6 74.4 24.9 75.2 18.5 174.8 28.6 280.3 28.6s205.1-10.2 280.3-28.6c31-7.6 56.8-16.4 77.1-26.2v133.5c-0.8 1.2-3.3 4.1-9 8.1l-0.9 0.6c-0.9 0.6-1.9 1.3-3 1.9-1.1 0.7-2.2 1.4-3.5 2.1-0.4 0.2-0.8 0.5-1.3 0.7-0.4 0.2-0.9 0.5-1.3 0.7-0.5 0.3-0.9 0.5-1.4 0.7-0.2 0.1-0.5 0.3-0.7 0.4-0.2 0.1-0.5 0.3-0.7 0.4-0.3 0.1-0.5 0.3-0.8 0.4-0.3 0.1-0.5 0.3-0.8 0.4-0.4 0.2-0.8 0.4-1.1 0.6-0.4 0.2-0.8 0.4-1.3 0.6-0.5 0.2-0.9 0.4-1.4 0.7-0.7 0.3-1.3 0.6-2.1 0.9-0.3 0.1-0.6 0.3-0.9 0.4-1.7 0.7-3.4 1.5-5.3 2.3l-1.5 0.6c-1.7 0.7-3.5 1.4-5.4 2.1-0.4 0.2-0.8 0.3-1.1 0.4-1.2 0.5-2.5 0.9-3.8 1.4l-0.9 0.3c-2.1 0.8-4.4 1.5-6.7 2.3-0.9 0.3-1.9 0.6-2.9 0.9-2.2 0.7-4.4 1.4-6.7 2.1-0.8 0.3-1.7 0.5-2.5 0.8-7.3 2.1-15.3 4.3-24.1 6.5-0.6 0.2-1.2 0.3-1.9 0.5-0.6 0.2-1.3 0.3-1.9 0.5-3.2 0.8-6.5 1.5-9.9 2.3-69.1 15.2-158.8 23.6-252.6 23.6s-183.5-8.4-252.6-23.6c-1.2-0.3-2.4-0.5-3.6-0.8-0.6-0.1-1.2-0.3-1.8-0.4-0.3-0.1-0.6-0.2-1-0.2-0.7-0.2-1.4-0.3-2.1-0.5-0.7-0.2-1.5-0.3-2.2-0.5-1.1-0.3-2.3-0.5-3.4-0.8-6.4-1.5-12.3-3.1-17.8-4.7-0.7-0.2-1.5-0.4-2.2-0.6-1.4-0.4-2.9-0.8-4.3-1.3-0.9-0.3-1.8-0.5-2.7-0.8l-3.9-1.2c-1.2-0.4-2.5-0.8-3.6-1.2-0.4-0.2-0.9-0.3-1.3-0.4-0.8-0.3-1.6-0.5-2.4-0.8-0.8-0.3-1.7-0.6-2.5-0.9-1.1-0.4-2.1-0.7-3.2-1.1-2.6-1-5.1-1.9-7.5-2.8-0.8-0.3-1.5-0.6-2.3-0.9-0.1-0.1-0.2-0.1-0.3-0.1-0.6-0.3-1.2-0.5-1.8-0.8-0.3-0.1-0.6-0.3-0.9-0.4-0.3-0.1-0.6-0.2-0.9-0.4-0.3-0.1-0.6-0.2-0.9-0.4-1.4-0.6-2.8-1.2-4.1-1.8-0.5-0.2-1-0.5-1.5-0.7-0.5-0.2-1-0.5-1.5-0.7-3.9-1.9-7.2-3.7-10.1-5.3-2.1-1.2-3.9-2.4-5.5-3.5-0.1-0.1-0.2-0.1-0.2-0.2-1.8-1.3-3.3-2.4-4.5-3.4-0.2-0.2-0.4-0.3-0.5-0.4-0.3-0.2-0.5-0.4-0.7-0.7l-0.6-0.6c-0.3-0.3-0.5-0.5-0.8-0.7-0.2-0.2-0.5-0.5-0.6-0.7-0.3-0.3-0.5-0.6-0.8-0.9-0.6-0.7-0.9-1.1-1-1.4V258.9z m11-77.8c12.8-8.5 39.5-21.3 94.1-33.4C328.5 132.4 418.2 124 512 124s183.5 8.4 252.6 23.7c54.5 12.1 81.3 24.9 94.1 33.4 5.2 3.4 8.1 6.2 9.6 7.9-5.3 6-27.1 24.3-103.7 41.3C695.5 245.6 605.8 254 512 254s-183.5-8.4-252.6-23.7C182.8 213.4 161 195 155.7 189c1.6-1.8 4.4-4.5 9.6-7.9z m-11 211.3c0.1 0.4 0.2 0.9 0.2 1.6h-0.2v-1.6zM869.5 834c-2.4 3.5-20 23.9-104.8 42.6-69.1 15.2-158.8 23.6-252.6 23.6s-183.5-8.4-252.6-23.6C174.6 858 157 837.5 154.5 834V684.5c2 1 4.1 1.9 6.2 2.9 0.6 0.3 1.1 0.5 1.7 0.7l2.1 0.9c0.8 0.3 1.5 0.6 2.3 1 0.7 0.3 1.3 0.6 2 0.8 0.7 0.3 1.4 0.6 2.1 0.8 3.6 1.4 7.3 2.9 11.2 4.3 0.7 0.3 1.5 0.5 2.2 0.8 3.5 1.2 7.1 2.5 10.9 3.7 1 0.3 2.1 0.7 3.1 1 1 0.3 2.1 0.7 3.1 1 4.4 1.3 8.9 2.6 13.5 3.9 1.8 0.5 3.7 1 5.5 1.5 0.9 0.3 1.9 0.5 2.8 0.7 0.9 0.2 1.9 0.5 2.8 0.7 1.9 0.5 3.8 1 5.7 1.4 75.2 18.4 174.8 28.5 280.3 28.5s205.1-10.1 280.3-28.5c1.9-0.5 3.9-1 5.7-1.4 0.9-0.2 1.9-0.5 2.8-0.7 0.9-0.2 1.9-0.5 2.8-0.7 1.9-0.5 3.7-1 5.5-1.5 4.6-1.3 9.1-2.6 13.5-3.9 1.1-0.3 2.1-0.6 3.1-1 1-0.3 2.1-0.7 3.1-1 3.7-1.2 7.4-2.4 10.9-3.7 0.7-0.3 1.5-0.5 2.2-0.8 3.9-1.4 7.6-2.8 11.2-4.3 0.7-0.3 1.4-0.6 2.1-0.8 0.7-0.3 1.3-0.5 2-0.8 0.8-0.3 1.5-0.6 2.3-1l2.1-0.9c0.6-0.2 1.1-0.5 1.7-0.7 2.1-0.9 4.2-1.9 6.2-2.9V834z" fill="#727272" p-id="4287"></path></svg>',
  web: '<svg t="1724405418350" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4402" width="18" height="18"><path d="M291.133 652.372c-69.471 0-116.477-19.774-132.361-55.68-16.771-37.898 2.78-88.722 55.053-143.108 51.212-53.283 128.034-104.13 216.314-143.176 91.75-40.587 187.245-63.865 261.998-63.865 69.462 0 116.463 19.775 132.345 55.684 16.764 37.894-2.79 88.716-55.058 143.104-51.212 53.288-128.026 104.138-216.295 143.182-91.741 40.583-187.235 63.859-261.996 63.859z m401.004-395.829c-73.41 0-167.431 22.966-257.953 63.01-87.119 38.532-162.817 88.593-213.149 140.96-24.245 25.226-41.208 49.543-50.418 72.277-9.256 22.849-10.164 42.986-2.699 59.855 14.185 32.066 57.944 49.726 123.216 49.726 73.418 0 167.438-22.965 257.951-63.005 87.106-38.531 162.798-88.594 213.13-140.966 24.242-25.226 41.205-49.544 50.416-72.279 9.257-22.848 10.168-42.984 2.707-59.851-14.186-32.066-57.939-49.727-123.201-49.727z" fill="#433F3F" p-id="4403"></path><path d="M270.603 465.821c0-169.149 112.446-273.906 231.619-273.906 129.745 0 204.708 93.224 204.708 243.152 0 17.299-0.961 34.599-3.844 47.093H348.45c4.805 115.329 74.002 192.215 177.799 192.215 50.937 0 93.224-16.338 131.667-42.287l28.832 51.898c-45.17 28.832-98.029 52.859-170.109 52.859-136.473 0-246.036-100.913-246.036-271.024z m367.13-40.365c0-111.485-49.976-170.11-134.55-170.11-76.886 0-145.123 62.47-155.694 170.11h290.244z" fill="#433F3F" p-id="4404"></path><path d="M790.219 413.638c-45.363 59.253-131.507 122.7-239.112 170.301-123.264 54.53-242.991 74.191-317.324 57.86" fill="#FFFFFF" p-id="4405"></path><path d="M290.849 652.347c-21.255 0-40.808-1.855-58.14-5.663l2.146-9.768c75.892 16.674 196.297-5.377 314.229-57.549 102.219-45.22 190.879-108.31 237.165-168.769l7.939 6.079c-22.98 30.017-56.615 61.326-97.268 90.541-42.471 30.522-90.85 57.873-143.792 81.293-93.115 41.194-188.048 63.836-262.279 63.836z" fill="#433F3F" p-id="4406"></path></svg>'
}
// 自定义节点视图
class CustomIconTextNode extends RectNode {
  getShape() {
    const { x, y, width, height, properties } = this.props.model;
    const title = properties.title || '节点名称';
    const description = properties.description || '节点描述';

    // SVG 图标的定义
    const svgIcon = customIcon.web


    return h('g', {}, [
      // 绘制长方形
      h('rect', {
        x: x - width / 2,
        y: y - height / 2,
        width,
        height,
        rx: 5,
        ry: 5,
        fill: '#FFFFFF',
        stroke: '#D3D3D3',
      }),
      // 绘制 SVG 图标和标题
      h('foreignObject', {
        x: x - width / 2,
        y: y - height / 2,
        width,
        height: height / 2,
      }, [
        h('div', {
          xmlns: 'http://www.w3.org/1999/xhtml',
          style: `display: flex; align-items: center; width: ${width}px; height: ${height / 2}px;`,
        }, [
          h('div', {
            style: 'margin-left: 4px; margin-right: 8px;  width:8; height: 8;', // 图标和标题之间的间距
            innerHTML: svgIcon,
          }),
          h('div', {
            style: `
              font-size: 13px;
              white-space: nowrap;        /* 防止文本换行 */
              overflow: hidden;           /* 隐藏超出容器的文本 */
              text-overflow: ellipsis;    /* 用省略号表示超出文本 */
              width: ${width - 50}px;      /* 确保宽度足够显示省略号 */
            `,
          }, title),
        ]),
      ]),
      // 绘制横线
      h('line', {
        x1: x - width / 2,
        y1: y,
        x2: x + width / 2,
        y2: y,
        stroke: '#D3D3D3',
        'stroke-width': 0.5,
      }),
      // 绘制描述文字
      h('text', {
        x: x - width / 2 + 4,
        y: y + height / 4,
        fill: '#000000',
        'text-anchor': 'start',
        'dominant-baseline': 'middle',
        'font-size': 12,
      }, description),
    ]);
  }
}

// 自定义节点模型
class CustomIconTextNodeModel extends RectNodeModel {
  initNodeData(data) {
    super.initNodeData(data);
    this.width = 180;
    this.height = 50;
  }
}

export { CustomIconTextNode, CustomIconTextNodeModel };
